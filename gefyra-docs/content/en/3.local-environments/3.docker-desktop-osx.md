---
title: Getting started with Gefyra and Docker Desktop Kubernetes on MacOS
description: This example is really similar to the k3d getting started guide. However, Docker Desktop's Kubernetes comes with some specialities which must be taken care of to make this guide work.
navigation:
  title: Docker Desktop Kubernetes (OSX)
  icon: i-simple-icons-docker
---

**Try out our [Docker Desktop Extension](https://gefyra.dev/docs/docker-extension/){target="_blank"}!**

**Note:** Gefyra works the same for different Kubernetes distributions. Docker Desktop doesn't come with an ingress installed which must be added to the cluster to get things working.

You can easily try Gefyra yourself following this small example.

## Prerequisites

1. Follow the [installation](/en/quick-start/installation/) for MacOS.

2. Start the Kubernetes cluster that comes with Docker Desktop. This may take moment.

![docker desktop kubernetes settings](/img/getting_started_docker_desktop_kubernetes.png)

3. Tell kubectl to use your docker-desktop cluster:

```sh
kubectl config use-context docker-desktop
```

4. Install an ingress to enable routing for the cluster. For this guide we use the nginx
ingress controller like this:

```sh
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.2.1/deploy/static/provider/cloud/deploy.yaml
```
5. Now patch the nginx ingress controller service to make port `8080` available:

```sh
kubectl patch svc -n ingress-nginx ingress-nginx-controller -p '{"spec": {"ports": [{"appProtocol": "http", "name": "http", "port": 8080, "protocol": "TCP", "targetPort": "http"}]}}' --type merge
```
6. Apply some workload, for example from the testing directory of this repo:  

```sh
kubectl apply -f https://raw.githubusercontent.com/gefyrahq/gefyra/main/testing/workloads/hello_dd.yaml
```
Check out this workload running under: [http://hello.127.0.0.1.nip.io:8080/](http://hello.127.0.0.1.nip.io:8080/){target="_blank"}    

7. Set up Gefyra with the following command:

**For Docker Desktop <4.16.x:**

```sh
gefyra up
```

**For Docker Desktop >=4.16.x:**

```sh
gefyra up --host=kubernetes.docker.internal
```

## Running Gefyra

### 1. Run a local Docker image with Gefyra in order to make it part of the cluster.

1. Build your Docker image with a local tag, for example from the testing directory:

```sh
cd testing/images/ && docker build -f Dockerfile.local . -t pyserver
```

2. Execute Gefyra's run command:

```sh
gefyra run -i pyserver -N mypyserver -n default
```

3. _exec_ into the running container and look around. You will find the container to run within your Kubernetes cluster.

```sh
docker exec -it mypyserver bash
wget -O- hello-nginx
```

will print out the website of the cluster service hello-nginx from within the cluster.

### 2. Create a bridge in order to intercept the traffic to the cluster application with the one running locally

```sh
gefyra bridge -N mypyserver -n default --port 8000:80 --target deploy/hello-nginxdemo/hello-nginx

```

Check out the locally running server comes up under: [http://hello.127.0.0.1.nip.io:8080/](http://hello.127.0.0.1.nip.io:8080/){target="_blank"}

### 3. List all running _bridges_:

```sh
gefyra list --bridges
```

### 4. _Unbridge_ the local container and reset the cluster to its original state: 

```sh
gefyra unbridge -N mypybridge
```

Check out the initial response from: [http://hello.127.0.0.1.nip.io:8080/](http://hello.127.0.0.1.nip.io:8080/){target="_blank"}

## Cleaning up

Remove Gefyra's components from the cluster with

```sh
gefyra down
```

::card
#title
  Please provide us with your feedback

#default
  Did everything work as expected? How was the experience of using Gefyra? We'd appreciate if you could take 2 minutes of your time to fill out our [feedback form](https://forms.gle/AWT9NparpTVk8E978){target="_blank"}.
::

